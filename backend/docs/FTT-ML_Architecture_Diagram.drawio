<?xml version="1.0" encoding="UTF-8"?>
<mxfile host="app.diagrams.net" modified="2024-01-15T12:00:00.000Z" agent="Claude Code" version="22.1.16" etag="diagram-id" type="device">
  <diagram id="FTT-ML-Architecture" name="Financial Data Transformation Platform">
    <mxGraphModel dx="1422" dy="794" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1200" pageHeight="1000" math="0" shadow="0">
      <root>
        <mxCell id="0"/>
        <mxCell id="1" parent="0"/>
        
        <!-- Title -->
        <mxCell id="title" value="Financial Data Transformation Platform (FTT-ML)" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=24;fontStyle=1;fontColor=#2c3e50;" vertex="1" parent="1">
          <mxGeometry x="200" y="20" width="800" height="40" as="geometry"/>
        </mxCell>

        <!-- Frontend Layer Container -->
        <mxCell id="frontend-container" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ecf0f1;strokeColor=#34495e;strokeWidth=3;" vertex="1" parent="1">
          <mxGeometry x="50" y="80" width="1100" height="200" as="geometry"/>
        </mxCell>
        
        <!-- Frontend Layer Title -->
        <mxCell id="frontend-title" value="FRONTEND LAYER (React 19 + Vite)" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=18;fontStyle=1;fontColor=#2c3e50;" vertex="1" parent="1">
          <mxGeometry x="70" y="90" width="1060" height="30" as="geometry"/>
        </mxCell>

        <!-- Core Components -->
        <mxCell id="core-components" value="Core Components&lt;br&gt;&lt;small&gt;• ChatInterface&lt;br&gt;• LeftSideBar&lt;br&gt;• RightSideBar&lt;br&gt;• AIRegexGenerator&lt;/small&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d6eaf8;strokeColor=#3498db;strokeWidth=2;fontSize=12;fontStyle=1;align=center;verticalAlign=middle;" vertex="1" parent="1">
          <mxGeometry x="80" y="140" width="140" height="120" as="geometry"/>
        </mxCell>

        <!-- Reconciliation Components -->
        <mxCell id="recon-components" value="Reconciliation&lt;br&gt;&lt;small&gt;• ReconciliationFlow&lt;br&gt;• PreviewStep&lt;br&gt;• AIRequirementsStep&lt;br&gt;• FilterDataStep&lt;/small&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fadbd8;strokeColor=#e74c3c;strokeWidth=2;fontSize=12;fontStyle=1;align=center;verticalAlign=middle;" vertex="1" parent="1">
          <mxGeometry x="250" y="140" width="140" height="120" as="geometry"/>
        </mxCell>

        <!-- Transformation Components -->
        <mxCell id="transform-components" value="Transformation&lt;br&gt;&lt;small&gt;• TransformationFlow&lt;br&gt;• ColumnMappingStep&lt;br&gt;• RowGenerationStep&lt;br&gt;• SchemaDefinition&lt;/small&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fdebd0;strokeColor=#f39c12;strokeWidth=2;fontSize=12;fontStyle=1;align=center;verticalAlign=middle;" vertex="1" parent="1">
          <mxGeometry x="420" y="140" width="140" height="120" as="geometry"/>
        </mxCell>

        <!-- Delta Components -->
        <mxCell id="delta-components" value="Delta Generation&lt;br&gt;&lt;small&gt;• DeltaGenerationFlow&lt;br&gt;• DeltaAIRequirements&lt;br&gt;• DeltaPreviewStep&lt;br&gt;• FilterDataStep&lt;/small&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e8daef;strokeColor=#9b59b6;strokeWidth=2;fontSize=12;fontStyle=1;align=center;verticalAlign=middle;" vertex="1" parent="1">
          <mxGeometry x="590" y="140" width="140" height="120" as="geometry"/>
        </mxCell>

        <!-- Viewer Components -->
        <mxCell id="viewer-components" value="Viewer &amp; Utils&lt;br&gt;&lt;small&gt;• DataViewer&lt;br&gt;• FileUpload&lt;br&gt;• Rules Mgmt&lt;/small&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#a9dfbf;strokeColor=#16a085;strokeWidth=2;fontSize=12;fontStyle=1;align=center;verticalAlign=middle;" vertex="1" parent="1">
          <mxGeometry x="760" y="140" width="120" height="120" as="geometry"/>
        </mxCell>

        <!-- File Management -->
        <mxCell id="file-management" value="File Management&lt;br&gt;&lt;small&gt;• FileUploadModal&lt;br&gt;• FileGeneratorFlow&lt;br&gt;• UploadAnimations&lt;/small&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8d7da;strokeColor=#dc3545;strokeWidth=2;fontSize=12;fontStyle=1;align=center;verticalAlign=middle;" vertex="1" parent="1">
          <mxGeometry x="910" y="140" width="120" height="120" as="geometry"/>
        </mxCell>

        <!-- API Services Layer -->
        <mxCell id="api-services" value="API SERVICES: aiAssistanceService • deltaApiService • transformationApiService • ruleManagementService • fileManagementService" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5dbdb;strokeColor=#2c3e50;strokeWidth=2;fontSize=14;fontStyle=1;align=center;verticalAlign=middle;" vertex="1" parent="1">
          <mxGeometry x="80" y="290" width="950" height="40" as="geometry"/>
        </mxCell>

        <!-- Backend Layer Container -->
        <mxCell id="backend-container" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fdf2e9;strokeColor=#8b4513;strokeWidth=3;" vertex="1" parent="1">
          <mxGeometry x="50" y="360" width="1100" height="280" as="geometry"/>
        </mxCell>

        <!-- Backend Layer Title -->
        <mxCell id="backend-title" value="BACKEND LAYER (FastAPI + Python)" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=18;fontStyle=1;fontColor=#8b4513;" vertex="1" parent="1">
          <mxGeometry x="70" y="370" width="1060" height="30" as="geometry"/>
        </mxCell>

        <!-- API Routes Layer -->
        <mxCell id="api-routes" value="API ROUTES LAYER&lt;br&gt;&lt;small&gt;health_routes • file_routes • reconciliation_routes • transformation_routes • delta_routes • ai_assistance • regex_routes • viewer_routes • save_results_routes • rule_management_routes&lt;/small&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fadbd8;strokeColor=#d35400;strokeWidth=2;fontSize=14;fontStyle=1;align=center;verticalAlign=middle;" vertex="1" parent="1">
          <mxGeometry x="80" y="410" width="950" height="60" as="geometry"/>
        </mxCell>

        <!-- Core Services -->
        <mxCell id="core-services" value="CORE SERVICES&lt;br&gt;&lt;small&gt;• file_service&lt;br&gt;• storage_service&lt;br&gt;• reconciliation_service&lt;br&gt;• transformation_service&lt;br&gt;• llm_service&lt;/small&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5f4e6;strokeColor=#27ae60;strokeWidth=2;fontSize=12;fontStyle=1;align=center;verticalAlign=middle;" vertex="1" parent="1">
          <mxGeometry x="80" y="490" width="180" height="120" as="geometry"/>
        </mxCell>

        <!-- AI Integration -->
        <mxCell id="ai-integration" value="AI INTEGRATION&lt;br&gt;&lt;small&gt;• OpenAI Service&lt;br&gt;• LLM Service (Multi-provider)&lt;br&gt;• AI Configuration Gen&lt;br&gt;• Regex Generation&lt;br&gt;• Smart Suggestions&lt;/small&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e8daef;strokeColor=#8e44ad;strokeWidth=2;fontSize=12;fontStyle=1;align=center;verticalAlign=middle;" vertex="1" parent="1">
          <mxGeometry x="290" y="490" width="180" height="120" as="geometry"/>
        </mxCell>

        <!-- Data Processing -->
        <mxCell id="data-processing" value="DATA PROCESSING&lt;br&gt;&lt;small&gt;• TransformationEngine&lt;br&gt;• ReconciliationEngine&lt;br&gt;• DeltaEngine&lt;br&gt;• Pattern Matching&lt;br&gt;• Validation Rules&lt;/small&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fadbd8;strokeColor=#c0392b;strokeWidth=2;fontSize=12;fontStyle=1;align=center;verticalAlign=middle;" vertex="1" parent="1">
          <mxGeometry x="500" y="490" width="180" height="120" as="geometry"/>
        </mxCell>

        <!-- Utilities -->
        <mxCell id="utilities" value="UTILITIES&lt;br&gt;&lt;small&gt;• date_utils&lt;br&gt;• financial_validators&lt;br&gt;• uuid_generator&lt;br&gt;• File I/O&lt;br&gt;• Error Handling&lt;/small&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d6eaf8;strokeColor=#2980b9;strokeWidth=2;fontSize=12;fontStyle=1;align=center;verticalAlign=middle;" vertex="1" parent="1">
          <mxGeometry x="710" y="490" width="180" height="120" as="geometry"/>
        </mxCell>

        <!-- Data Models -->
        <mxCell id="data-models" value="DATA MODELS &amp; SCHEMAS&lt;br&gt;&lt;small&gt;schemas.py • recon_models.py • transformation_models.py • Pydantic Validation • Request/Response Models&lt;/small&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e8daef;strokeColor=#7d3c98;strokeWidth=2;fontSize=14;fontStyle=1;align=center;verticalAlign=middle;" vertex="1" parent="1">
          <mxGeometry x="80" y="630" width="810" height="50" as="geometry"/>
        </mxCell>

        <!-- External Integrations Container -->
        <mxCell id="external-container" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5f4e6;strokeColor=#145a32;strokeWidth=3;" vertex="1" parent="1">
          <mxGeometry x="50" y="700" width="1100" height="180" as="geometry"/>
        </mxCell>

        <!-- External Integrations Title -->
        <mxCell id="external-title" value="EXTERNAL INTEGRATIONS &amp; STORAGE" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=18;fontStyle=1;fontColor=#145a32;" vertex="1" parent="1">
          <mxGeometry x="70" y="710" width="1060" height="30" as="geometry"/>
        </mxCell>

        <!-- LLM Providers -->
        <mxCell id="llm-providers" value="LLM PROVIDERS&lt;br&gt;&lt;small&gt;• OpenAI GPT-4&lt;br&gt;• Anthropic Claude&lt;br&gt;• Google Gemini&lt;br&gt;• JPMC Internal LLM&lt;br&gt;• Pluggable Architecture&lt;/small&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fef9e7;strokeColor=#f39c12;strokeWidth=2;fontSize=12;fontStyle=1;align=center;verticalAlign=middle;" vertex="1" parent="1">
          <mxGeometry x="80" y="750" width="180" height="110" as="geometry"/>
        </mxCell>

        <!-- Storage Systems -->
        <mxCell id="storage-systems" value="STORAGE SYSTEMS&lt;br&gt;&lt;small&gt;• Local File Storage&lt;br&gt;• AWS S3 (Optional)&lt;br&gt;• In-Memory Cache&lt;br&gt;• Temp File Management&lt;br&gt;• Result Persistence&lt;/small&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fdedec;strokeColor=#e74c3c;strokeWidth=2;fontSize=12;fontStyle=1;align=center;verticalAlign=middle;" vertex="1" parent="1">
          <mxGeometry x="290" y="750" width="180" height="110" as="geometry"/>
        </mxCell>

        <!-- Vector Database -->
        <mxCell id="vector-db" value="VECTOR DB&lt;br&gt;&lt;small&gt;• ChromaDB&lt;br&gt;• Sentence Transformers&lt;br&gt;• Similarity Matching&lt;br&gt;• Embedding Storage&lt;br&gt;• Semantic Search&lt;/small&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#eaf2f8;strokeColor=#3498db;strokeWidth=2;fontSize=12;fontStyle=1;align=center;verticalAlign=middle;" vertex="1" parent="1">
          <mxGeometry x="500" y="750" width="180" height="110" as="geometry"/>
        </mxCell>

        <!-- File Formats -->
        <mxCell id="file-formats" value="FILE FORMATS&lt;br&gt;&lt;small&gt;• CSV Processing&lt;br&gt;• Excel (XLSX/XLS)&lt;br&gt;• Pandas DataFrames&lt;br&gt;• JSON Export&lt;br&gt;• Streaming I/O&lt;/small&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fdf2e9;strokeColor=#8b4513;strokeWidth=2;fontSize=12;fontStyle=1;align=center;verticalAlign=middle;" vertex="1" parent="1">
          <mxGeometry x="710" y="750" width="180" height="110" as="geometry"/>
        </mxCell>

        <!-- Performance Features -->
        <mxCell id="performance-features" value="PERFORMANCE&lt;br&gt;&lt;small&gt;• Hash-based Matching&lt;br&gt;• Vectorized Operations&lt;br&gt;• Pattern Caching&lt;br&gt;• Streaming I/O&lt;br&gt;• 50k-100k Records&lt;/small&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1f5fe;strokeColor=#0277bd;strokeWidth=2;fontSize=12;fontStyle=1;align=center;verticalAlign=middle;" vertex="1" parent="1">
          <mxGeometry x="920" y="750" width="180" height="110" as="geometry"/>
        </mxCell>

        <!-- Arrows - Frontend to API Services -->
        <mxCell id="arrow1" value="" style="endArrow=classic;html=1;rounded=0;strokeWidth=2;strokeColor=#34495e;" edge="1" parent="1" source="core-components" target="api-services">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="150" y="280" as="sourcePoint"/>
            <mxPoint x="150" y="290" as="targetPoint"/>
          </mxGeometry>
        </mxCell>

        <mxCell id="arrow2" value="" style="endArrow=classic;html=1;rounded=0;strokeWidth=2;strokeColor=#34495e;" edge="1" parent="1" source="recon-components" target="api-services">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="320" y="280" as="sourcePoint"/>
            <mxPoint x="320" y="290" as="targetPoint"/>
          </mxGeometry>
        </mxCell>

        <mxCell id="arrow3" value="" style="endArrow=classic;html=1;rounded=0;strokeWidth=2;strokeColor=#34495e;" edge="1" parent="1" source="transform-components" target="api-services">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="490" y="280" as="sourcePoint"/>
            <mxPoint x="490" y="290" as="targetPoint"/>
          </mxGeometry>
        </mxCell>

        <mxCell id="arrow4" value="" style="endArrow=classic;html=1;rounded=0;strokeWidth=2;strokeColor=#34495e;" edge="1" parent="1" source="delta-components" target="api-services">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="660" y="280" as="sourcePoint"/>
            <mxPoint x="660" y="290" as="targetPoint"/>
          </mxGeometry>
        </mxCell>

        <!-- Arrows - API Services to Backend Routes -->
        <mxCell id="arrow5" value="" style="endArrow=classic;html=1;rounded=0;strokeWidth=2;strokeColor=#8b4513;" edge="1" parent="1" source="api-services" target="api-routes">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="555" y="340" as="sourcePoint"/>
            <mxPoint x="555" y="410" as="targetPoint"/>
          </mxGeometry>
        </mxCell>

        <!-- Arrows - Routes to Services -->
        <mxCell id="arrow6" value="" style="endArrow=classic;html=1;rounded=0;strokeWidth=2;strokeColor=#27ae60;" edge="1" parent="1" source="api-routes" target="core-services">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="170" y="480" as="sourcePoint"/>
            <mxPoint x="170" y="490" as="targetPoint"/>
          </mxGeometry>
        </mxCell>

        <mxCell id="arrow7" value="" style="endArrow=classic;html=1;rounded=0;strokeWidth=2;strokeColor=#8e44ad;" edge="1" parent="1" source="api-routes" target="ai-integration">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="380" y="480" as="sourcePoint"/>
            <mxPoint x="380" y="490" as="targetPoint"/>
          </mxGeometry>
        </mxCell>

        <mxCell id="arrow8" value="" style="endArrow=classic;html=1;rounded=0;strokeWidth=2;strokeColor=#c0392b;" edge="1" parent="1" source="api-routes" target="data-processing">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="590" y="480" as="sourcePoint"/>
            <mxPoint x="590" y="490" as="targetPoint"/>
          </mxGeometry>
        </mxCell>

        <mxCell id="arrow9" value="" style="endArrow=classic;html=1;rounded=0;strokeWidth=2;strokeColor=#2980b9;" edge="1" parent="1" source="api-routes" target="utilities">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="800" y="480" as="sourcePoint"/>
            <mxPoint x="800" y="490" as="targetPoint"/>
          </mxGeometry>
        </mxCell>

        <!-- Arrows - Services to Data Models -->
        <mxCell id="arrow10" value="" style="endArrow=classic;html=1;rounded=0;strokeWidth=2;strokeColor=#7d3c98;" edge="1" parent="1" source="core-services" target="data-models">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="170" y="620" as="sourcePoint"/>
            <mxPoint x="170" y="630" as="targetPoint"/>
          </mxGeometry>
        </mxCell>

        <mxCell id="arrow11" value="" style="endArrow=classic;html=1;rounded=0;strokeWidth=2;strokeColor=#7d3c98;" edge="1" parent="1" source="ai-integration" target="data-models">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="380" y="620" as="sourcePoint"/>
            <mxPoint x="380" y="630" as="targetPoint"/>
          </mxGeometry>
        </mxCell>

        <!-- Arrows - Services to External -->
        <mxCell id="arrow12" value="" style="endArrow=classic;html=1;rounded=0;strokeWidth=2;strokeColor=#f39c12;" edge="1" parent="1" source="ai-integration" target="llm-providers">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="170" y="650" as="sourcePoint"/>
            <mxPoint x="170" y="750" as="targetPoint"/>
          </mxGeometry>
        </mxCell>

        <mxCell id="arrow13" value="" style="endArrow=classic;html=1;rounded=0;strokeWidth=2;strokeColor=#e74c3c;" edge="1" parent="1" source="core-services" target="storage-systems">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="380" y="650" as="sourcePoint"/>
            <mxPoint x="380" y="750" as="targetPoint"/>
          </mxGeometry>
        </mxCell>

        <mxCell id="arrow14" value="" style="endArrow=classic;html=1;rounded=0;strokeWidth=2;strokeColor=#3498db;" edge="1" parent="1" source="data-processing" target="vector-db">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="590" y="650" as="sourcePoint"/>
            <mxPoint x="590" y="750" as="targetPoint"/>
          </mxGeometry>
        </mxCell>

        <mxCell id="arrow15" value="" style="endArrow=classic;html=1;rounded=0;strokeWidth=2;strokeColor=#8b4513;" edge="1" parent="1" source="utilities" target="file-formats">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="800" y="650" as="sourcePoint"/>
            <mxPoint x="800" y="750" as="targetPoint"/>
          </mxGeometry>
        </mxCell>

      </root>
    </mxGraphModel>
  </diagram>
</mxfile>